{% extends "base.html" %}

{% block title %}Film Discovery - 发现好电影{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero maoyan-gradient">
    <div class="hero-background">
        <!-- 胶片背景效果 -->
        <div class="film-strip">
            <div class="film-frame"></div>
            <div class="film-frame"></div>
            <div class="film-frame"></div>
            <div class="film-frame"></div>
            <div class="film-frame"></div>
        </div>

        <!-- 动态背景粒子 -->
        <div class="particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>

    <div class="hero-content">
        <div class="hero-text">
            <h1 class="hero-title">
                <span class="title-main">发现好电影</span>
                <span class="title-sub">Film Discovery</span>
            </h1>
            <p class="hero-description">
                探索精彩电影世界，发现属于你的电影宝藏。通过智能推荐，找到最适合你的影片。
            </p>
        </div>

        <div class="hero-actions">
            <a href="{{ url_for('film.list_films') }}" class="btn btn-primary btn-large">
                <i class="fas fa-play"></i>
                开始浏览
            </a>
            {% if not current_user.is_authenticated %}
            <a href="{{ url_for('auth.register') }}" class="btn btn-outline btn-large">
                <i class="fas fa-user-plus"></i>
                立即注册
            </a>
            {% endif %}
        </div>

        <!-- 统计信息 -->
        <div class="hero-stats">
            <div class="stat-item">
                <span class="stat-number">{{ films|length }}</span>
                <span class="stat-label">部电影</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">55</span>
                <span class="stat-label">部经典</span>
            </div>
            <div class="stat-item">
                <span class="stat-number">∞</span>
                <span class="stat-label">种可能</span>
            </div>
        </div>
    </div>
</section>

<!-- 精选电影区域 -->
<section class="featured-section fade-in-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <i class="fas fa-star"></i>
                热门电影
            </h2>
            <p class="section-description">精选高评分电影，为你推荐最佳观影选择</p>
        </div>

        {% if films %}
            <div class="films-grid featured-grid modern-grid">
            {% for film in films[:6] %}
            <div class="film-card featured-card advanced-hover" data-film-id="{{ film.id }}">
                <div class="film-poster">
                    {% if film.poster_url %}
                        <img src="{{ film.poster_url }}" alt="{{ film.title }}的海报" loading="lazy">
                        <div class="film-overlay">
                            <div class="overlay-content">
                                <a href="{{ url_for('film.film_detail', film_id=film.id) }}" class="btn btn-primary btn-sm">
                                    <i class="fas fa-eye"></i>
                                    查看详情
                                </a>
                            </div>
                        </div>
                    {% else %}
                        <div class="no-poster">
                            <i class="fas fa-film"></i>
                            <span>暂无海报</span>
                        </div>
                    {% endif %}

                    <!-- 评分徽章 -->
                    {% if film.average_rating > 0 %}
                    <div class="rating-badge">
                        <i class="fas fa-star"></i>
                        <span>{{ "%.1f"|format(film.average_rating) }}</span>
                    </div>
                    {% endif %}
                </div>

                <div class="film-info">
                    <h3>
                        <a href="{{ url_for('film.film_detail', film_id=film.id) }}" class="film-title-link">
                            {{ film.title }}
                        </a>
                    </h3>

                    <div class="film-meta">
                        {% if film.year %}<span class="meta-item">{{ film.year }}</span>{% endif %}
                        {% if film.genre %}<span class="meta-item">{{ film.genre }}</span>{% endif %}
                        {% if film.director %}<span class="meta-item">{{ film.director }}</span>{% endif %}
                    </div>

                    <div class="film-stats">
                        <span class="stat-item">
                            <i class="fas fa-heart"></i>
                            {{ film.like_count }}
                        </span>
                    </div>

                    {% if film.description %}
                    <p class="film-description">{{ film.description[:80] }}{% if film.description|length > 80 %}...{% endif %}</p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="section-footer">
            <a href="{{ url_for('film.list_films') }}" class="btn btn-outline">
                <i class="fas fa-arrow-right"></i>
                查看全部电影
            </a>
        </div>
        {% else %}
        <div class="empty-state">
            <i class="fas fa-film"></i>
            <h3>暂无电影数据</h3>
            <p>我们正在努力添加更多精彩电影...</p>
        </div>
        {% endif %}
    </div>
</section>

<!-- 功能特色区域 -->
<section class="features-section fade-in-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">
                <i class="fas fa-magic"></i>
                为什么选择我们
            </h2>
        </div>

        <div class="features-grid">
            <div class="feature-card modern-card">
                <div class="feature-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h3>智能推荐</h3>
                <p>基于你的观影偏好，智能推荐最适合你的电影</p>
            </div>

            <div class="feature-card modern-card">
                <div class="feature-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>社区互动</h3>
                <p>与其他影迷分享观影心得，交流电影观点</p>
            </div>

            <div class="feature-card modern-card">
                <div class="feature-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>精准搜索</h3>
                <p>多种筛选条件，快速找到心仪的电影</p>
            </div>

            <div class="feature-card modern-card">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3>移动优先</h3>
                <p>完美适配手机端，随时随地发现好电影</p>
            </div>
        </div>
    </div>
</section>

{% endblock %}
